<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<title>ordre-siden</title>
<!-- REPLACE ME WITH A FRAGMENT -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="../public/css/styles.css" th:href="@{/css/styles.css}" rel="stylesheet"/>

</head>
<body>
<div id="nav-fullwidth">
    <div id="navbar">
        <div id="logo">
            <img src="../public/images/fog-logo.jpeg" th:src="@{/images/fog-logo.jpeg}" width="60px" height="60px"/>
        </div>
        <ul class="main-menu">
            <li class="button"><a href="/">Hjem</a></li>
            <li class="button"><a href="/bestil-carport">Bestil unik carport</a></li>
            <li class="button"><a href="/login">Login</a></li>
            <li class="button"><a href="/log-ud">Log ud</a></li>
            <!-- <li class="button" th:if="${session.currentUser == null}" th:remove="tag"><a href="/min-side" th:text="${session.currentUser.email}"></a></li>-->

            <div th:if="${session.currentUser != null}">
                <li class="button"><a href="/min-side" th:text="${session.currentUser.email}"></a></li>
            </div>

            <div th:if="${session.currentUser == null}">
                <li class="button"><a href="/min-side" th:text="test"></a></li>
            </div>
        </ul>
    </div>
</div>


<!-- Start her  -->


<!-- TODO: Lav til mobil-version/pc-version -->

<!-- Ordre informationer -->
<div id>
    <!-- User information-->
    <div id="user-form">
        <form method="post" action="/gem-bruger-oplysninger">

            <h1>Bruger Oplysninger</h1>

            <h4>Ordre ID: <span th:text="${orderID}"/>
                <input type="hidden" id="orderID" name="orderID" th:value="${orderID}">
            </h4>

            <h4>Bruger ID: <span th:text="${session.user.getUserId()}"></span>
                <input type="hidden" id="userId" name="userId" th:value="${session.user.getUserId()}">
            </h4>


            <h4>Navn: <span th:text="${session.user.getName()}"></span>
                <label for="newName">Nyt Navn:</label>
                <input type="text" id="newName" name="newName">
            </h4>

            <h4>Adresse: <span th:text="${session.user.getAddress()}"></span>
                <label for="newAddress">Ny Adresse:</label>
                <input type="text" id="newAddress" name="newAddress">
            </h4>

            <h4>Postnummer: <span th:text="${session.user.getZipcode()}"></span>
                <label for="newZipcode">Nyt Postnummer:</label>
                <input type="text" id="newZipcode" name="newZipcode">
            </h4>

            <h4>Telefon nr: <span th:text="${session.user.getMobile()}"></span>
                <label for="newMobile">Nyt Telefon nr:</label>
                <input type="text" id="newMobile" name="newMobile">
            </h4>

            <h4>Email: <span th:text="${session.user.getEmail()}"></span>
                <label for="newEmail">Ny Email:</label>
                <input type="text" id="newEmail" name="newEmail">
            </h4>

            <button type="submit" formaction="/gem-bruger-oplysninger">Gem</button>
        </form>
    </div>

</div>


<!-- Carport informationer -->
<div>

    <h1>Carport Oplysninger</h1>

    <form method="post" action="/gem-carport-oplysninger">

        <h4>Ordre ID: <span th:text="${orderID}"/>
            <input type="hidden" id="orderID" name="orderID" th:value="${orderID}">
        </h4>

        <h4>Carport ID: <span th:text="${session.old_carport.getId()}"/>
            <input type="hidden" id="carportId" name="carportId">
        </h4>

        <h4>Længde: <span th:text="${session.old_carport.getLength()}"></span>
            <input type="hidden" id="old_carport_length" name="orderID" th:value="${session.old_carport.getLength()}">
            <label for="newLength">Ny længde:</label>
            <!-- Replace the input element with a select element -->
            <select id="newLength" name="newLength">
                <!-- Add options with different values -->
                <option
                        th:each="length : ${lengthList}"
                        th:value="${length}"
                        th:text="${length + 'cm'}">
                    Vælg en ny længde
                </option>
            </select>
        </h4>

        <h4>Bredde: <span th:text="${session.old_carport.getWidth()}"></span>
            <input type="hidden" id="old_carport_width" name="orderID" th:value="${session.old_carport.getWidth()}">
            <label for="newWidth">Ny bredde:</label>
            <!-- Replace the input element with a select element -->
            <select id="newWidth" name="newWidth">
                <!-- Add options with different values -->
                <option
                        th:each="width : ${widthList}"
                        th:value="${width}"
                        th:text="${width + 'cm'}">
                    Vælg en ny bredde
                </option>
            </select>
        </h4>

        <h4>Højde: <span th:text="${session.old_carport.getHeight()}"></span>
            <label for="newHeight">Ny højde:</label>
            <!-- Replace the input element with a select element -->
            <select id="newHeight" name="newHeight">
                <!-- Add options with different values -->
                <option
                        th:each="height : ${heightList}"
                        th:value="${height}"
                        th:text="${height + 'cm'}">
                    Vælg en ny højde
                </option>
            </select>
        </h4>
        <button type="submit" formaction="/gem-carport-oplysninger">Gem</button>
    </form>

</div>


<!-- Shed informationer -->
<div th:if="${session.old_shed.getId() != 0}">
    <h1>Skur Oplysninger</h1>

    <form method="post" action="/gem-skur-oplysninger">

        <h4>Ordre ID: <span th:text="${orderID}"/>
            <input type="hidden" id="orderID" name="orderID" th:value="${orderID}">
        </h4>

        <div>
            <h4>Skur ID: <span th:text="${session.old_shed.getId()}">></h4>

            <h4>Længde: <span th:text="${session.old_shed.getLength()}"></span>
                <label for="shed_length">Ny længde:</label>
                <!-- Replace the input element with a select element -->
                <select id="shed_length" name="shed_length">
                    <!-- Add options with different values -->
                    <option
                            th:each="length : ${lengthList}"
                            th:value="${length}"
                            th:text="${length + 'cm'}">
                        længde
                    </option>
                </select>
            </h4>

            <h4>Bredde: <span th:text="${session.old_shed.getWidth()}">"></span>
                <label for="shed_width">Ny bredde:</label>
                <!-- Replace the input element with a select element -->
                <select id="shed_width" name="shed_width">
                    <!-- Add options with different values -->
                    <option
                            th:each="width : ${widthList}"
                            th:value="${width}"
                            th:text="${width + 'cm'}">
                        bredde
                    </option>
                </select>
            </h4>

        </div>

        <button type="submit" formaction="/gem-skur-oplysninger">Gem</button>
    </form>
</div>


<!--Valg af skur, hvis kunden ikke har et skur-->

<div th:if="${session.old_shed.getId() <= 0}">

    <h1>Ønsker kunden et skur?</h1>

    <input type="radio" onclick="show()" id="ja" name="redskabsrum" value="ja" th:required>
    <label for="ja">ja</label><br>

    <input type="radio" id="nej" onclick="hide()" name="redskabsrum" value="nej" th:required>
    <label for="nej">nej</label><br>


    <!-- Additional shed dimensions -->
    <div id="hidden_menu" hidden="true">

        <div id="shed-dimensions">
            <form method="post" action="/tilfoej-skur">
                <h4>Ordre ID: <span th:text="${orderID}"/>
                    <input type="hidden" id="orderID" name="orderID" th:value="${orderID}">
                </h4>
                <label for="new_shed_length">Redskabsrum længde</label><br>
                <select id="new_shed_length" name="new_shed_length" th:required>
                    <!-- Options will be dynamically added using JavaScript -->
                </select><br>

                <label for="new_shed_width">Redskabsrum bredde</label><br>
                <select id="new_shed_width" name="new_shed_width" th:required>
                    <!-- Options will be dynamically added using JavaScript -->
                </select><br>
                <button type="submit" formaction="/tilfoej-skur">Gem</button>
            </form>
        </div>
        <!-- End of additional shed dimensions -->
    </div>

</div>


<script>
    function hide() {
        document.getElementById('hidden_menu').hidden = true
    }

    function show() {
        document.getElementById('hidden_menu').hidden = false;
        updateShedDimensions();
    }

    function updateShedDimensions() {
        var carportWidth = parseInt(document.getElementById('old_carport_width').value);
        var carportLength = parseInt(document.getElementById('old_carport_length').value);

        var shedWidthSelect = document.getElementById('new_shed_width');
        var shedLengthSelect = document.getElementById('new_shed_length');

        // Calculate shed width and length based on carport dimensions
        var shedWidthOptions = [Math.floor(carportWidth * 0.5), carportWidth];  // 50% or 100% of carport width
        var shedLengthOptions = [Math.floor(carportLength * 0.5)]; // 50% of carport length

        // Clear previous options
        shedWidthSelect.innerHTML = "";
        shedLengthSelect.innerHTML = "";

        // Add width options
        shedWidthOptions.forEach(function (width) {
            var option = document.createElement('option');
            option.value = width;
            option.text = width + 'cm';
            shedWidthSelect.add(option);
        });

        // Add length options
        shedLengthOptions.forEach(function (length) {
            var option = document.createElement('option');
            option.value = length;
            option.text = length + 'cm';
            shedLengthSelect.add(option);
        });
    }
</script>


<!-- INDTIL HER -->

<footer>
    <!-- REPLACE ME WITH A FRAGMENT -->
    <p id="footer-text">Created by Team LAHY - All rights reserved</p>
</footer>

</body>
</html>
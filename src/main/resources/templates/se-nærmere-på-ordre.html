<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">

<title>ordre-siden</title>
<!-- REPLACE ME WITH A FRAGMENT -->
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link href="../public/css/styles.css" th:href="@{/css/styles.css}" rel="stylesheet"/>

</head>
<body>
<div id="nav-fullwidth">
    <div id="navbar">
        <div id="logo">
            <img src="../public/images/fog-logo.jpeg" th:src="@{/images/fog-logo.jpeg}" width="60px" height="60px"/>
        </div>
        <ul class="main-menu">
            <li class="button"><a href="/">Hjem</a></li>
            <li class="button"><a href="/bestil-carport">Bestil unik carport</a></li>
            <li class="button"><a href="/login">Login</a></li>
            <li class="button"><a href="/log-ud">Log ud</a></li>
            <!-- <li class="button" th:if="${session.currentUser == null}" th:remove="tag"><a href="/min-side" th:text="${session.currentUser.email}"></a></li>-->

            <div th:if="${session.currentUser != null}">
                <li class="button"><a href="/min-side" th:text="${session.currentUser.email}"></a></li>
            </div>

            <div th:if="${session.currentUser == null}">
                <li class="button"><a href="/min-side" th:text="test"></a></li>
            </div>
        </ul>
    </div>
</div>


<!-- Start her  -->


<!-- TODO: Lav til mobil-version/pc-version -->

<div id="main-header">

    <h1>Ordre ID: <span th:text="${orderID}"/>
        <input type="hidden" name="orderID" th:value="${orderID}">
    </h1>
    <button id="send-regning-knap" type="submit" formaction="/gem-bruger-oplysninger">Send regning</button>


</div>

<div id="main-container">
    <!-- User information-->
    <div id="main-container-left">
        <form id="user-form" method="post" action="/gem-bruger-oplysninger">
            <input type="hidden" name="orderID" th:value="${orderID}">
            <h1>Bruger Oplysninger</h1>

            <h4>Bruger ID: <span th:text="${session.user.getUserId()}"></span>
                <input type="hidden" name="userId" th:value="${session.user.getUserId()}">
            </h4>

            <div class="form-section">
                <h4>Fulde navn: <span th:text="${session.user.getName()}"></span></h4>
                <label>Ændre fulde navn til:</label>
                <input type="text" name="newName">
            </div>

            <div class="form-section">
                <h4>Adresse: <span th:text="${session.user.getAddress()}"></span></h4>
                <label>Ændre adresse til:</label>
                <input type="text" name="newAddress">
            </div>

            <div class="form-section">
                <h4>Postnummer: <span th:text="${session.user.getZipcode()}"></span></h4>
                <label>Ændre postnummer til:</label>
                <input type="text" name="newZipcode">
            </div>

            <div class="form-section">
                <h4>Mobilnummer: <span th:text="${session.user.getMobile()}"></span></h4>
                <label>Ændre mobilnummer til:</label>
                <input type="text" name="newMobile">
            </div>

            <div class="form-section">
                <h4>E-mail: <span th:text="${session.user.getEmail()}"></span></h4>
                <label>Ændre e-mail til</label>
                <input type="text" name="newEmail">
            </div>

            <button id="gem-knap-user" type="submit" formaction="/gem-bruger-oplysninger">Gem nye ændringer</button>
        </form>
    </div>

    <!-- Carport informationer -->
    <div id="main-container-mid">
        <form id="carport-form" method="post" action="/gem-carport-oplysninger">
            <input type="hidden" name="orderID" th:value="${orderID}">
            <h1>Carport Oplysninger</h1>

            <h4>Carport ID: <span th:text="${session.old_carport.getId()}"></span></h4>
            <input type="hidden" name="carportId">

            <h4>Længde: <span th:text="${session.old_carport.getLength()}"></span></h4>
            <input type="hidden" name="orderID" th:value="${session.old_carport.getLength()}">
            <label>Ny længde:</label>
            <select name="newLength">
                <option value="" disabled selected>Vælg en ny længde</option>
                <option th:each="length : ${lengthList}" th:value="${length}" th:text="${length + 'cm'}">Vælg en ny længde</option>
            </select>

            <h4>Bredde: <span th:text="${session.old_carport.getWidth()}"></span></h4>
            <input type="hidden" name="orderID" th:value="${session.old_carport.getWidth()}">
            <label>Ny bredde:</label>
            <select name="newWidth">
                <option value="" disabled selected>Vælg en ny bredde</option>
                <option th:each="width : ${widthList}" th:value="${width}" th:text="${width + 'cm'}">Vælg en ny bredde</option>
            </select>

            <h4>Højde: <span th:text="${session.old_carport.getHeight()}"></span></h4>
            <label>Ny højde:</label>
            <select name="newHeight">
                <option value="" disabled selected>Vælg en ny højde</option>
                <option th:each="height : ${heightList}" th:value="${height}" th:text="${height + 'cm'}">Vælg en ny højde</option>
            </select>

            <button id="gem-knap-carport" type="submit" formaction="/gem-carport-oplysninger">Gem nye ændringer</button>
        </form>
    </div>

    <!-- Shed informationer -->
    <div id="main-container-right" th:if="${session.old_shed.getId() != 0}">
        <form id="shed-form" method="post" action="/gem-skur-oplysninger">
            <input type="hidden" name="orderID" th:value="${orderID}">
            <h1>Skur Oplysninger</h1>

            <div>
                <h4>Skur ID: <span th:text="${session.old_shed.getId()}"></span></h4>

                <h4>Længde: <span th:text="${session.old_shed.getLength()}"></span>
                    <label>Ny længde:</label>
                    <select name="shed_length">
                        <option value="" disabled selected>Vælg en ny længde</option>
                        <option th:each="length : ${lengthList}" th:value="${length}" th:text="${length + 'cm'}">længde</option>
                    </select>
                </h4>

                <h4>Bredde: <span th:text="${session.old_shed.getWidth()}"></span>
                    <label>Ny bredde:</label>
                    <select name="shed_width">
                        <option value="" disabled selected>Vælg en ny bredde</option>
                        <option th:each="width : ${widthList}" th:value="${width}" th:text="${width + 'cm'}">bredde</option>
                    </select>
                </h4>
            </div>

            <button id="gem-knap-skur" type="submit" formaction="/gem-skur-oplysninger">Gem nye ændringer</button>
        </form>
    </div>

    <!-- Valg af skur, hvis kunden ikke har et skur -->
    <div id="main-container-right" th:if="${session.old_shed.getId() <= 0}">
        <h1>Ønsker kunden et skur?</h1>

        <input type="radio" onclick="show()" name="redskabsrum" value="ja" th:required>
        <label>ja</label><br>

        <input type="radio" onclick="hide()" name="redskabsrum" value="nej" th:required>
        <label>nej</label><br>

        <div id="hidden_menu" hidden="true">
            <div id="shed-dimensions">
                <form method="post" action="/tilfoej-skur">
                    <input type="hidden" name="orderID" th:value="${orderID}">

                    <label>Redskabsrum længde</label><br>
                    <select name="new_shed_length" th:required>
                        <option value="" disabled selected>Vælg længde</option>
                        <!-- Options will be dynamically added using JavaScript -->
                    </select><br>

                    <label>Redskabsrum bredde</label><br>
                    <select name="new_shed_width" th:required>
                        <option value="" disabled selected>Vælg bredde</option>
                        <!-- Options will be dynamically added using JavaScript -->
                    </select><br>
                    <button id="gem-knap-nyt-skur" type="submit" formaction="/tilfoej-skur">Gem nye ændringer</button>
                </form>
            </div>
        </div>
    </div>
</div>


<script>
    function hide() {
        document.getElementById('hidden_menu').hidden = true
    }

    function show() {
        document.getElementById('hidden_menu').hidden = false;
        updateShedDimensions();
    }

    function updateShedDimensions() {
        var carportWidth = parseInt(document.getElementById('old_carport_width').value);
        var carportLength = parseInt(document.getElementById('old_carport_length').value);

        var shedWidthSelect = document.getElementById('new_shed_width');
        var shedLengthSelect = document.getElementById('new_shed_length');

        // Calculate shed width and length based on carport dimensions
        var shedWidthOptions = [Math.floor(carportWidth * 0.5), carportWidth];  // 50% or 100% of carport width
        var shedLengthOptions = [Math.floor(carportLength * 0.5)]; // 50% of carport length

        // Clear previous options
        shedWidthSelect.innerHTML = "";
        shedLengthSelect.innerHTML = "";

        // Add width options
        shedWidthOptions.forEach(function (width) {
            var option = document.createElement('option');
            option.value = width;
            option.text = width + 'cm';
            shedWidthSelect.add(option);
        });

        // Add length options
        shedLengthOptions.forEach(function (length) {
            var option = document.createElement('option');
            option.value = length;
            option.text = length + 'cm';
            shedLengthSelect.add(option);
        });
    }
</script>


<!-- INDTIL HER -->

<footer>
    <!-- REPLACE ME WITH A FRAGMENT -->
    <p id="footer-text">Created by Team LAHY - All rights reserved</p>
</footer>

</body>
</html>